<!DOCTYPE html>
<html lang="en">

<!-- this is the head of the document containing metadata-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rick's Music Database</title>
	<link rel="shortcut icon" href="./images/music_gif.gif" type="image/x-icon">
    <link rel="stylesheet" href="css/Index.css">

</head>

<!-- this is the body of the document containing the page contents -->
<body>
	<!-- this is the title header -->
    <header> 
		<h1 id="page_title">Rick's Music Player & Database </h1>
		<h4 id="subtitle"> Music Data Repository </h4>
	</header>
	
	<!-- this is the nav bar of the document containing hyperlinks-->
	<nav>
		<!-- link to index.html -->
		<p id="home_link"><a href="/home">Home Page</p></a>
		<p><a id="rankings_link" href="/Rankings">Song Rankings</a></p>
	</nav>
	
	<br>
	<hr>
	
	<!-- this is the article container that hold the diffrent sections of the webpage -->
	<article>
		<!-- this is the gif section of the article -->
		<section id="gif_container">
			<img src="./images/music_gif.gif" id="music_gif" alt="" srcset="">
		</section>

		<!-- this is the music player section of the article -->
		<section id="player_container"> 
			<p id="caption"> Upload an audio file and play your favorite music!  </p>

			<!--This is an audio player for the mp3 files-->
              <% if (player!="") { %>
				<%source%>

			<audio controls id="audio_player" autoplay>
                  <source id="source" src="<%= source %>">
			</audio>
			  <%} else {%>
				<audio controls id="audio_player" >
					<source id="source" src="">
			  </audio>
			  <%}%>
		</section>

		<!-- section for database table display -->
		<section id="table_container">
            <h3 id="music_table_title"><%= title %></h3>
            <% if (action == 'add') { %>
                <% } else { %>
			<table id="music_table">
				<thead>
					<th>Times played</th>
					<th>Song Name</th>
					<th>Album Name</th>
					<th>Release Year</th>
                    <th>Artist Name</th>
					<th>Genre</th>
					<th>Uploader Name</th>
					<th>Date Added</th>
                    <th>MP3 File</th>
					<th hidden>Link to File</th>
                    <th>Select</th>
                    <th>Delete</th>
                    <th>Update</th>
                </thead>
				<tbody>
                        <% if(index.length > 0)
                        {
                            index.forEach(function(data) {
                            %>
							<% index.source %>	
                                <tr>
									<td><%= data.times_played %></td>
                                    <td><%= data.song_name %></td>
                                    <td><%= data.album_name %></td>
									<td><%= data.release_year %></td>
                                    <td><%= data.artist_name %></td>
									<td><%= data.music_genre %></td>
									<td><%= data.uploader_name %></td>
									<td><%= data.date_added %></td>
                                    <td><%= data.file_name %></td>
									<td hidden><%= data.link %></td>
                                    <td><button id = 'selectRow' class="select" onclick="location.href='/select_row?id=' + '<%= data.id%>' + '&mp3=' +'<%= data.mp3 %>' + '&source=' +'<%=data.link%>'">Select</button></td>
                                    <td><button id = 'deleteRow' class="delete" onclick="location.href='/drop_row?id=' + '<%= data.id%>' + '&mp3=' + '<%= data.mp3%>' + '&link=' + '<%= data.link %>'">Delete</button></td>
                                    <td><button class="update" onclick="location.href='/update_row?id=' + '<%= data.id %>'">Update</button></td>
                                </tr>
                        <%
                            });
                        } 
                        else 
                        { 
                        %> 
                     <tr>
                        <td colspan="13">No Data Found</td>
                     </tr>
                     <%
                    }
                    %>
				</tbody>
			</table>
            <% } %>
			<p id="rLink"><a href="/home">Home Page</a></p>
		</section>

	<br>
	<hr>
	<br>

	<!-- this is the footer of the document containing contact information -->
	<footer>
		<p id="info"> 
			Email: rdymond@oakland.edu 
			<br>
			<br>
			Class: CSI-3450 Database Design & Implementation
			<br>
			<br>
			Professor: mollah@oakland.edu
		</p>
	</footer>

	<!-- js for page -->
	<script src="./js/home.js"></script>

</body>

</html>