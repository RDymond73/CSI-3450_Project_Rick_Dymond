<!DOCTYPE html>
<html lang="en">

<!-- this is the head of the document containing metadata-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rick's Music Database</title>
	<link rel="shortcut icon" href="./images/music_gif.gif" type="image/x-icon">
    <link rel="stylesheet" href="css/Index.css">
</head>

<!-- this is the body of the document containing the page contents -->
<body>
	<!-- this is the title header -->
    <header> 
		<h1 id="page_title">Rick's Music Player & Database </h1>
		<h4 id="subtitle"> Music Data Repository </h4>
	</header>
	
	<!-- this is the nav bar of the document containing hyperlinks-->
	<nav>
		<!-- link to index.html -->
		<p id="home_link"><a href="/home">Home Page</p></a>
	</nav>
	
	<br>
	<hr>
	
	<!-- this is the article container that hold the diffrent sections of the webpage -->
	<article>
		<!-- this is the gif section of the article -->
		<section id="gif_container">
			<img src="./images/music_gif.gif" id="music_gif" alt="" srcset="">

		</section>

		<!-- this is the music player section of the article -->
		<section id="player_container"> 
			<p id="caption"> Upload an audio file and play your favorite music!  </p>

			<!--This is an audio player for the mp3 files-->
			<audio controls id="audio_player">
				 <source src="" id="mp3_src">
			</audio>

			<br>

			<!-- This is a file uploader for MP3s -->
			<form action="/" method="POST" enctype="multipart/form-data">
				<input type="file" id="file_input" accept="audio/*" required name="mp3_file"/>
			</form>
			<br>

			<!-- field for adding database info  -->
            <form action="javascript:void(0);" method="POST"
            onsubmit = "app.Add()">
			<input type="text" name="song" id="song" width="100px" required placeholder="Song title">
			<input type="text" name="album" id="album" width="100px" required placeholder="Album Name">
			<input type="text" name="artist_name" id="artist_name" width="100px" required placeholder="Artist Name">
			<input type="text" name="uploader_name" id="uploader_name" width="100px" required placeholder="Uploader Name">
			<br>
            </form>

			<!-- create, read, update, delete buttons -->
            <form method="POST" onsubmit="">
			<input type="button" value="Upload" id="upload" onClick="location.href='/home'">
			<br>
			<input type="button" value="Search" id="search" onClick="location.href='/search_table'">
			<br>
			<input type="button" value="Update" id="update" onClick="location.href= '/update_table'">
			<br>
			<input type="button" value="Delete" id="delete" onClick="location.href='/drop_row'">
			<br>
            </form>

		</section>

		<!-- section for database table display -->
		<section id="table_container">
            <p id="music_table_title"><%= title %></p>
            <% if (action == 'add') { %>
                <% } else { %>
			<table id="music_table">
				<thead>
					<th>ID</th>
					<th>Song Name</th>
					<th>Album Name</th>
                    <th>Artist name</th>
					<th>Uploader Name</th>
                    <th>MP3 file</th>
                    <th>Select</th>
                    <th>Delete</th>
                    <th>Update</th>
                </thead>
				<tbody>
						<!-- <tr><td colspan="">Test</td></tr>
                        <tr><td colspan=""></d>test</td></tr> -->
                        <% if(index.length > 0)
                        {
                            index.forEach(function(data) {
                            %>
                                <tr>
                                    <td><%= data.id %></td>
                                    <td><%= data.song %></td>
                                    <td><%= data.album %></td>
                                    <td><%= data.artist %></td>
                                    <td><%= data.uploader %></td>
                                    <td><%= data.mp3 %></td>
                                    <td>
                                        <a href="/drop_row?<%= %>"  class="update"></a>
                                    </td>
                                    <td><button id = 'deleteRow' class="delete" onclick="location.href='/drop_row?id=' + '<%= data.id%>'">Delete</button></td>
                                    <td><button class="update">Update</button></td>
                                </tr>
                        <%
                            });
                        } 
                        else 
                        { 
                        %> 
                     <tr>
                        <td colspan="9">No Data Found</td>
                     </tr>
                     <%
                    }
                    %>
				</tbody>
			</table>
            <% } %>
		</section>
	</article>

	<br>
	<hr>
	<br>

	<!-- this is the footer of the document containing contact information -->
	<footer>
		<p id="info"> 
			Email: rdymond@oakland.edu 
			<br>
			<br>
			Class: CSI-3450 Database Design & Implementation
			<br>
			<br>
			Professor: mollah@oakland.edu
		</p>
	</footer>

	<!-- js for page -->
	<script src="./js/home.js"></script>

</body>

</html>